<html lang="en">
  
<head>
    <meta charset="UTF-8">
    <title>GFG User Details</title>
  
    <!-- INCLUDING JQUERY-->
    <script src=
"https://code.jquery.com/jquery-3.5.1.js">
    </script>
</head>

<body>
    <h2>Creating an Object from a JSON String</h2>
    <h1 id="header">NOTHING HERE YET</h1>
    <h1 id="header2">HELLO</h1>
    <button onclick="myFunction2()">Click it</button>

    <input id="inputUserId" type="number">
    <input id="inputPassword" type="text">
    <button onclick="myFunction()">Try it</button>
    <h2 id="demo"></h2>

    <!-- <script type="text/javascript" src="personData.json"></script>  -->
<script>
    function myFunction2() {
        var inputUserId = document.getElementById("inputUserId").value;
        var inputPassword = document.getElementById("inputPassword").value;

        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function(){
            if(xhttp.readyState==4 && xhttp.status==200){
                var data = JSON.parse(xhttp.responseText);
                // document.getElementById("header").innerHTML = data.name;

                let txt = "";
                let count = 0;
                let index = -1;

                // Checking whether id is present in json
                for(var i = 0; i < data.length; i++) {
                    if(inputUserId === data[i].id){
                        count = 1;
                        index = i;

                    }
                }
                if(count === 1){
                        if(inputPassword === data[index].password){
                            txt = data[index].amount;
                        } else {
                            txt = "Invaid Credentials!";
                        }


                        // console.log(obj.id);    
                }
                else{
                    txt = "No Such User found";
                }
                        
                document.getElementById("header").innerHTML = txt;
            } else{
                document.getElementById("header").innerHTML = "sorry! ERROR";
            }
            
        }
        xhttp.open("GET","personData.json",true);
        xhttp.send();
        document.getElementById("header2").innerHTML = "hi";
    }

    function myFunction() {
        var inputUserId = document.getElementById("inputUserId").value;
        var inputPassword = document.getElementById("inputPassword").value;
        // var person= personData; 

//         fetch("./personData.json")
// .then(response => {
//    return response.json();
// })
// .then(jsondata => console.log(jsondata));

var person = [{
    "id" : "1", 
    "name"   : "supreet",
    "password" : "supreet1",
    "amount": "2000"
},
{
    "id" : "2", 
    "name"   : "nitesh",
    "password" : "nitesh1",
    "amount": "1000"
}];

let txt = "";
let count = 0;
let index = -1;

// Checking whether id is present in json
for(var i = 0; i < person.length; i++) {
    if(inputUserId === person[i].id){
        count = 1;
        index = i;

    }
}
if(count === 1){
        if(inputPassword === person[index].password){
            txt = person[index].amount;
        } else {
            txt = "Invaid Credentials!";
        }


        // console.log(obj.id);    
}
else{
    txt = "No Such User found";
}
document.getElementById("demo").innerHTML = txt;
    }
</script>
    
</body>
  
</html>